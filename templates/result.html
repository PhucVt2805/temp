<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>{{ title }}</title>
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='logo.png') }}">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      background: #f6f8f9;
    }

    .container {
      display: flex;
      margin: 5vh auto;
      width: 80%;
    }

    .spacer {
      width: 10%;
    }

    .left-panel,
    .right-panel {
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.06);
      padding: 24px;
      box-sizing: border-box;
      width: 35%;
    }

    .left-panel h2,
    .right-panel h2 {
      font-size: 2.8vh;
      margin-top: 3vh;
      color: #333;
    }

    .result-box {
      background: #f3f3f3;
      padding: 1vh;
      border-radius: 12px;
      white-space: pre-wrap;
      word-break: break-word;
      font-size: 1.8vh;
    }
  </style>
</head>
<body>

  {% include "navbar.html" %}

  <div class="container">
    <div class="spacer"></div>

    <div class="left-panel">
      <h2>MÃ´ hÃ¬nh Ä‘Æ°á»£c sá»­ dá»¥ng:</h2>
      <div class="result-box">{{ ', '.join(models) }}</div>

      <h2>Cháº¿ Ä‘á»™:</h2>
      <div class="result-box">{{ mode }}</div>

      <h2>VÄƒn báº£n:</h2>
      <div class="result-box">{{ text }}</div>
    </div>

    <div class="spacer"></div>

<div class="right-panel">
  <h2 style="margin-bottom: 1px;">Káº¿t quáº£ dá»± Ä‘oÃ¡n:</h2>
  {% if mode == 'Tá»«ng Ä‘oáº¡n' %}
    {% for text in results['text'] %}
    <div style="display: flex; background: #f1f3f5; padding: 1vh; margin: 2vh 0vh; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.05);">
      <div style="flex: 1; font-size: 1.8vh; color: #333; white-space: pre-wrap; margin: 0 1vh; padding: 0 1vh;">{{ text }}</div>
      <div style="display: flex; align-items: center; justify-content: center; gap: 0.7vh; flex-direction: column;">
        <div style="font-size: 3vh;">
          {{ 'ðŸ¤–' if results['predictions'][loop.index0] == 1 else 'ðŸ‘¦' }}
        </div>
        <div style="font-size: 1.6vh; color: #555; font-weight: bold;">
          {{ (results['avg_probabilities'][loop.index0][1] * 100) | round(2) if results['predictions'][loop.index0] == 1 else (results['avg_probabilities'][loop.index0][0] * 100) | round(2) }}%
        </div>
      </div>
    </div>
    {% endfor %}
  {% elif mode == 'ToÃ n bá»™ vÄƒn báº£n' %}
    {% set mean_pred = (results['predictions'] | sum) / results['predictions'] | length %}
    {% set emoji = 'ðŸ¤–' if mean_pred >= 0.5 else 'ðŸ‘¦' %}

    {% set mean_prob = (
      results['avg_probabilities'] | map(attribute=1) | list if mean_pred >= 0.5 else
      results['avg_probabilities'] | map(attribute=0) | list
    ) %}
    {% set mean_score = (mean_prob | sum) / (mean_prob | length) * 100 %}

    <div style="display: flex; background: #f1f3f5; padding: 1vh; margin: 2vh 0vh; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.05);">
      <div style="flex: 1; font-size: 1.8vh; color: #333; white-space: pre-wrap; margin: 0 1vh; padding: 0 1vh;">{{ text }}</div>
      <div style="display: flex; align-items: center; justify-content: center; gap: 0.7vh; flex-direction: column;">
        <div style="font-size: 3vh;">{{ emoji }}</div>
        <div style="font-size: 1.6vh; color: #555; font-weight: bold;">{{ mean_score | round(2) }}%</div>
      </div>
    </div>
  {% endif %}
</div>


    <div class="spacer"></div>
  </div>

</body>
</html>
